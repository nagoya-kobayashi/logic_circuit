# 概要
情報Ⅰにおける論理回路の授業で1コマ（50分）での実施を想定し，ステップアップ方式により未学習状態からの深い理解獲得を目標にしたシミュレータ教材です。
## 特徴
### 教育環境に依らず利用可能
1. 完全オフライン対応 ：HTMLおよびJavaScriptのみで完結動作
2. 追加ソフト不要 ：外部プラグインやライブラリのインストール不要
3. 即時利用可能性 ：教材ファイルを生徒がファイルアクセスできる共有フォルダ等に配置するだけで起動
### 初学者向け論理回路シミュレータ機能
1. 論理回路の設計体験機能 ：配線を行う機能は実装せず、あらかじめ入出力スイッチと論理ゲートは配線されている状態にして習熟度の低い初学者が取り掛かれないリスクを軽減
2. 操作の即時フィードバック ：入力スイッチや論理ゲート種の変更操作後は即座にCanvas上で信号の流れ（配線）とLED表示が瞬時に更新
3. リアルタイム計算結果の表示 ：加算回路としての演算結果を出力スイッチの状態とリンクしながら自動で再計算し、画面左下に二進数／十進数形式で最新結果をリアルタイム表示
4. チェック機能 ：画面下部に「チェック」ボタンを配置、全入力パターンを自動で切り替えながら結果が正しいかを順に確認

# 使用方法

## はじめに
全ファイルをダウンロードし、生徒がアクセスできる共有フォルダに配置するか、全フォルダごと配布を行ってください。
フォルダ直下のindex.htmlにアクセスすれば、教材とシミュレータを用いた学習が始められます。

## 設定変更
そのまま動作できますが、よりコンピュータ室の環境に適した実施となるよう以下の調整を推奨します。

### 画面調整
現状は、1366x168の画面サイズで適切になるよう調整されています。
他の解像度で動かす場合は、各ステップフォルダ内の以下のファイルのパラメータを調整することを推奨します。
- index.htmlのcanvasタグのwidth属性やheight属性、imgタグ(ヒント画像)のwidth属性やheight属性を変更して、1画面に収まるように調整。
- step.config.jsの変数scaleで全体の描画倍率を調整。変数dxと変数dyで画面全体の描画位置を調整。

### 操作ログ出力機能
初期設定では、各ステップのチェックボタンが押されたタイミングで、操作ログがクライアントのブラウザにダウンロードされるようになっています。
以下の設定変更により、操作ログの取得を、ログサーバーを立てて、httpのpostによってサーバーサイドで取得するように動作を変更できます。
- simulator.config.js内で変数logServerに稼働させているURLを記述

その場合のサーバー側のperlプログラムがlogフォルダに配置されていますので、環境に合わせて実装ください。
なお、操作ログが不要であれば、変数logServerに仮の値を記述してください。この場合、バックグラウンドでpostエラーが発生しますがログ取得無しでシミュレータは正常に動作します。

# その他
## ファイル構成
### simulator
- jquery-1.7.1.min.js
- simulator.buildCircuit.js ：論理回路データを読み込んで、インスタンスの生成と、各パーツの接続を実施
- simulator.config.js ：描画カラー等の設定、ログ取得方式の設定、ログファイル形式の設定のパラメータ値
- simulator.gates.js ：論理ゲート(And, Or, Xor, Not)のクラス定義
- simulator.js ：シミュレータ本体の定義
- simulator.logger.js ：ログ出力機能の定義
- simulator.noxor.js ：シミュレータ本体(XOR無し版)の定義
- simulator.primitives.js ：導線(Lead)・分岐(Branch)のクラス定義
- simulator.switches.js ：入力スイッチ(InSwitch)・出力スイッチ(OutSwitch)のクラス定義

### step毎のファイル(step01等)
- checker.js ：チェックボタンを押下した際の動作と、シミュレータ画面左下の描画処理
- circuitData.js ：ステップ毎の回路データ(回路パーツの配置、接続関係)
- index.html ：ステップ毎のHTMLデータ(ステップ毎のヒントの記述など)
- step.config.js ：回路描画部の表示倍率や、x座標/y座標のスライド調整のパラメータ値
- tutorial01.png など ：htmlで使用する画像データ等(ステップ毎の正解画面など)


### doc
- 授業スライド.pptx ：授業で用いたスライド
- 使用画像.pptx ：最初のページ(最上位のindex.html)で使用している画像のpptx形式
- dat ：各ステップ課題の論理回路データのCSV形式(※未使用。実際には.jsに加工したものを各ステップフォルダ内に配置して使用)

### etc(その他・論理回路データ作成プログラム)
論理回路をプログラムによって作成してから、完成した論理回路データを出力する。
使用方法は「circuitData_CSV.html」他を参照。

### pic
最初のページ(最上位のindex.html)で使用している画像を格納

### log
操作ログの取得を、ログサーバーを立てて、httpのpostによってサーバーサイドで取得する場合のperlプログラム。
サーバーにperlCGIによるファイル出力機能を動作させることで、操作ログはチェックボタンを押下したタイミングでサーバーに送信され、
サーバーが全操作者のログを1ファイルに統合し、操作者の情報として端末IP列が追加される。
利用する場合は、simulator.config.js内で変数logServerに稼働させているURLを記述する。
この変数に何も記述が無ければ、ステップをクリアしたタイミングで、各クライアントが操作ログをダウンロードする動作となる。
